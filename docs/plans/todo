Fix all the ruff and mypy errors of v2.
At the same time of fixing, please also follows:
- The changes shall be follow the `docs/development/coding_rules_v2.md`
- all the class, package and attributes defintions shall be referred to `docs/requirements/packages`
- use the TDD methodology, add the unit test for the new classes and then implmentation
- all the tests shall be passed.
  
Tell me if you find the any conflict between the ruff and mypy check. 